import{S as P,a as S,i as C}from"./assets/vendor-89feecc5.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();const q=document.querySelector(".form"),x=document.querySelector(".input"),f=document.getElementById("gallery"),d=document.querySelector(".loader"),c=document.querySelector(".load-more-btn"),w=document.getElementById("pagination-info"),p=40,T=new P(".gallery a"),B="41719954-f83183d98e199e8ea762c32d5";let r=1,g="",l=!1,b;function y(s){const e=Math.ceil(s/p),o=f.children.length>0,a=e<=r,t=s>0;o&&!a&&t?(c.classList.remove("not-visible"),c.classList.add("visible")):(c.classList.remove("visible"),c.classList.add("not-visible"))}function m(){l||(C.error({title:"Error",message:"Sorry, there are no images matching your search query. Please try again!",position:"topRight",timeout:3500,progressBar:!1,onClose:function(){}}),l=!0)}function R(){l||(C.warning({title:"Caution",message:"We're sorry, but you've reached the end of search results.",position:"topRight",timeout:3500,progressBar:!1,color:"blue",onClose:function(){}}),l=!0)}function E(s){const e=Math.ceil(s/p);r<=e&&(w.textContent=`Page ${r} of ${e}`,y(s),r===e&&R())}async function I(s){try{d.classList.remove("hide");const e=await H(s);if(e.data.hits.length>0){if(E(e.data.totalHits),s>1){const a=f.firstElementChild.clientHeight;window.scrollBy({top:a*2,behavior:"smooth"})}}else m();b=e.data.totalHits}catch(e){console.error("Error fetching data:",e),m()}finally{d.classList.add("hide"),y(b)}}q.addEventListener("submit",async function(s){s.preventDefault();const e=x.value.trim();e&&(d.classList.remove("hide"),w.textContent="",l=!1,e!==g&&(f.innerHTML="",g=e,r=1),await I(r))});c.addEventListener("click",async function(){r++,l=!1,await I(r)});async function H(s){const e=`https://pixabay.com/api/?key=${B}&q=${encodeURIComponent(g)}&image_type=photo&orientation=horizontal&safesearch=true&page=${s}&per_page=${p}`;try{d.classList.remove("hide");const o=await S.get(e),a=o.data.hits;return a.length>0?(M(a),E(o.data.totalHits),y(o.data.totalHits)):m(),o}catch(o){throw console.error("Error fetching data:",o),m(),o}finally{d.classList.add("hide")}}function M(s){const e=document.createDocumentFragment();s.forEach(o=>{const a=document.createElement("li");a.classList.add("gallery-item");const t=document.createElement("a");t.href=o.largeImageURL,t.title=o.tags;const n=document.createElement("img");n.src=o.webformatURL,n.alt=o.tags;const i=document.createElement("div");i.classList.add("image-desc"),[{label:"Likes",value:o.likes},{label:"Views",value:o.views},{label:"Comments",value:o.comments},{label:"Downloads",value:o.downloads}].forEach(v=>{const u=document.createElement("div");u.classList.add("image-desc-item");const h=document.createElement("div");h.classList.add("image-desc-label"),h.textContent=v.label;const L=document.createElement("div");L.textContent=v.value,u.appendChild(h),u.appendChild(L),i.appendChild(u)}),t.appendChild(n),a.appendChild(t),a.appendChild(i),e.appendChild(a)}),f.appendChild(e),T.refresh()}
//# sourceMappingURL=commonHelpers.js.map
