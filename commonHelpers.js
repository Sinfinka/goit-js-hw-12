import{a as P,S,i as C}from"./assets/vendor-89feecc5.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(t){if(t.ep)return;t.ep=!0;const a=n(t);fetch(t.href,a)}})();const x=document.querySelector(".form"),H=document.querySelector(".input"),h=document.getElementById("gallery"),i=document.querySelector(".loader"),c=document.querySelector(".load-more-btn"),T=document.getElementById("pagination-info"),v=40,q="41719954-f83183d98e199e8ea762c32d5";let l=1,y="",m=!1;function f(o){const e=Math.ceil(o/v),n=h.children.length>0,s=e<=l;n&&!s?(c.classList.remove("not-visible"),c.classList.add("visible")):(console.log("btn"),c.classList.remove("visible"),c.classList.add("not-visible"))}function d(){m||(C.error({title:"Error",message:"Sorry, there are no images matching your search query. Please try again!",position:"topRight",timeout:3500,progressBar:!1}),m=!0)}function B(){m||(C.warning({title:"Caution",message:"We're sorry, but you've reached the end of search results.",position:"topRight",timeout:3500,progressBar:!1,color:"blue"}),m=!0)}function L(o){const e=Math.ceil(o/v);T.textContent=`Page ${l} of ${e}`,parseInt(e,10)<=parseInt(l,10)&&(f(o),B())}x.addEventListener("submit",async function(o){o.preventDefault();const e=H.value.trim();if(e){i.classList.remove("hide"),e!==y&&(h.innerHTML="",y=e,l=1);try{const n=await I(),s=n.data.hits;s.length>0?(b(s),L(n.data.totalHits),f(n.data.totalHits)):d()}catch(n){console.error("Error fetching data:",n)}finally{i.classList.add("hide")}}});c.addEventListener("click",async function(){i.classList.remove("hide"),l++;try{const o=await I(),e=o.data.hits;if(e.length>0){b(e),L(o.data.totalHits);const n=h.firstElementChild.clientHeight;window.scrollBy({top:n*2,behavior:"smooth"})}else d()}catch(o){console.error("Error fetching more data:",o),d()}finally{i.classList.add("hide"),f(response.data.totalHits)}});async function I(){const o=`https://pixabay.com/api/?key=${q}&q=${encodeURIComponent(y)}&image_type=photo&orientation=horizontal&safesearch=true&page=${l}&per_page=${v}`;try{i.classList.remove("hide");const e=await P.get(o),n=e.data.hits;return n.length>0?(b(n),L(e.data.totalHits),f(e.data.totalHits)):d(),e}catch(e){throw console.error("Error fetching data:",e),d(),e}finally{i.classList.add("hide")}}function b(o){const e=document.createDocumentFragment();o.forEach(s=>{const t=document.createElement("li");t.classList.add("gallery-item");const a=document.createElement("a");a.href=s.largeImageURL,a.title=s.tags;const r=document.createElement("img");r.src=s.webformatURL,r.alt=s.tags;const p=document.createElement("div");p.classList.add("image-desc"),[{label:"Likes",value:s.likes},{label:"Views",value:s.views},{label:"Comments",value:s.comments},{label:"Downloads",value:s.downloads}].forEach(E=>{const u=document.createElement("div");u.classList.add("image-desc-item");const g=document.createElement("div");g.classList.add("image-desc-label"),g.textContent=E.label;const w=document.createElement("div");w.textContent=E.value,u.appendChild(g),u.appendChild(w),p.appendChild(u)}),a.appendChild(r),t.appendChild(a),t.appendChild(p),e.appendChild(t)}),h.appendChild(e),new S(".gallery a").refresh()}
//# sourceMappingURL=commonHelpers.js.map
