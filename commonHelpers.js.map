{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.form');\nconst searchInput = document.querySelector('.input');\nconst gallery = document.getElementById('gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more-btn');\n\nconst apiKey = '41719954-f83183d98e199e8ea762c32d5'; // код з Pixabay\nlet currentPage = 1;\nlet searchTerm = '';\n\nfunction showLoadMoreButton() {\n  loadMoreButton.style.display = gallery.children.length > 0 ? 'block' : 'none';\n}\n\nfunction showErrorToast() {\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n    timeout: 3500,\n    progressBar: false,\n  });\n}\n\nform.addEventListener('submit', async function (event) {\n  event.preventDefault();\n  searchTerm = searchInput.value.trim();\n\n  if (!searchTerm) {\n    return;\n  }\n\n  loader.classList.remove('hide');\n  gallery.innerHTML = '';\n  currentPage = 1;\n\n  try {\n    const images = await fetchImages();\n    if (images.length > 0) {\n      displayImages(images);\n    } else {\n      showErrorToast();\n    }\n  } catch (error) {\n    console.error('Error fetching data:', error);\n  } finally {\n    loader.classList.add('hide');\n    showLoadMoreButton();\n  }\n});\n\nloadMoreButton.addEventListener('click', async function () {\n  loader.classList.remove('hide');\n  currentPage++;\n\n  try {\n    const images = await fetchImages();\n    displayImages(images);\n  } catch (error) {\n    console.error('Error fetching more data:', error);\n    showErrorToast();\n  } finally {\n    loader.classList.add('hide');\n    showLoadMoreButton();\n  }\n});\n\nfunction fetchImages() {\n  const perPage = 40;\n  const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(\n    searchTerm\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=${perPage}`;\n\n  return axios.get(apiUrl).then(response => response.data.hits);\n}\n\nfunction displayImages(images) {\n  const fragment = document.createDocumentFragment();\n\n  images.forEach(image => {\n    const li = document.createElement('li');\n    li.classList.add('gallery-item');\n\n    const a = document.createElement('a');\n    a.href = image.largeImageURL;\n    a.title = image.tags;\n\n    const img = document.createElement('img');\n    img.src = image.webformatURL;\n    img.alt = image.tags;\n\n    const descContainer = document.createElement('div');\n    descContainer.classList.add('image-desc');\n\n    const descItems = [\n      { label: 'Likes', value: image.likes },\n      { label: 'Views', value: image.views },\n      { label: 'Comments', value: image.comments },\n      { label: 'Downloads', value: image.downloads },\n    ];\n\n    descItems.forEach(item => {\n      const descItem = document.createElement('div');\n      descItem.classList.add('image-desc-item');\n\n      const label = document.createElement('div');\n      label.classList.add('image-desc-label');\n      label.textContent = item.label;\n\n      const value = document.createElement('div');\n      value.textContent = item.value;\n\n      descItem.appendChild(label);\n      descItem.appendChild(value);\n      descContainer.appendChild(descItem);\n    });\n\n    a.appendChild(img);\n    li.appendChild(a);\n    li.appendChild(descContainer);\n    fragment.appendChild(li);\n  });\n\n  gallery.appendChild(fragment);\n  const lightbox = new SimpleLightbox('.gallery a');\n  lightbox.refresh();\n}\n"],"names":["form","searchInput","gallery","loader","loadMoreButton","apiKey","currentPage","searchTerm","showLoadMoreButton","showErrorToast","iziToast","event","images","fetchImages","displayImages","error","apiUrl","axios","response","fragment","image","li","a","img","descContainer","item","descItem","label","value","SimpleLightbox"],"mappings":"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"}